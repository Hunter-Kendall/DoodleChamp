<!DOCTYPE html>
<html>
    <header>
        <meta charset="utf-8"/>
        <title>DoodleChamp Home</title>
    </header>
    <body>
        <h2>Welcome to DoodleChamp</h2>
        <form action="Host" method="POST" >
            <input id="username" name="name" type="text">
            <button id="lobby-btn">Create Lobby</button>
            {% csrf_token %}
        </form>
        <br>
        <p>Join a Lobby</p>
        <form action="Lobby" method = "POST">
            <input type="text" name="name">
            <input id="lobby-code" type="text" name="code">
            
        <button id="join-btn">Join Lobby</button><br><br>
        {% csrf_token %}
        </form>
        

        <script>

            document.querySelector('#lobby-btn').onclick = function(e){
                // let username = document.querySelector('#username').value;
                // window.location.pathname = '/DoodleChamp/room_id/';
            }

            // document.querySelector('#lobby-code').focus();
            // document.querySelector('#lobby-code').onkeyup = function(e) {
            //     if (e.keyCode === 13) { // enter, return
            //         document.querySelector('#join-btn').click();
            //     }
            // }

            document.querySelector('#join-btn').onclick = function(e){
                let roomName = document.querySelector('#lobby-code').value;
                window.location.pathname = '/DoodleChamp/' + roomName + '/';
            }
        </script>

        {% for lobby in lobbies reversed %}
            <tr>
                <small>{{ lobby.code }}</small></td>
            </tr>
        {% endfor %}

        
    </body>
</html>