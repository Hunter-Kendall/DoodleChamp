<!DOCTYPE html>
<html>
    <header>
        <meta charset="utf-8"/>
        <title>DoodleChamp lobby</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    </header>
    <body>
        <h2>Join code: ####</h2>
                      
        <div class="container text-center">
            <div class="row">
                <div class="col border">word</div>
            </div>
            <div class="row">
              <div class="col border">
                Player List
              </div>
              <div class="col border">
                <canvas id="draw-area" class = "border"></canvas>
              </div>
              <div id="chat" class="col border">
                chat
                <input id="chat-field" type="text">
                <button id="guess-button">guess</button>
                <button id="pencil-btn">&#9998</button>
                <button id="rectangle-btn">&#11036</button>
              </div>
            </div>
          </div>
          <script>
            const canvas = document.getElementById("draw-area");
            const context = canvas.getContext("2d");
            let isDrawing = false;
            let isRectangle = false;
            let isPencil = false;
            let lastX = 0;
            let lastY = 0;
            let currentX = 0;
            let currentY = 0;


            
            document.querySelector('#rectangle-btn').onclick = function(e){
                isRectangle = true;
                isPencil = false;
            };

            document.querySelector('#pencil-btn').onclick = function(e){
                isRectangle = false;
                isPencil = true;
            };


            canvas.addEventListener('mousedown', (event) =>{
              if (isRectangle === true) { 
                isDrawing = true;
                lastX = event.clientX - canvas.offsetLeft;
                lastY = event.clientY - canvas.offsetTop;
                console.log("drawing rectangle")
              }

              if (isPencil === true) { 
                isDrawing = true;
                lastX = event.clientX - canvas.offsetLeft;
                lastY = event.clientY - canvas.offsetTop;
                console.log("drawing")
              }
            });

            canvas.addEventListener('mousemove', (event) => {
              if (isDrawing && isRectangle) {
                const currentX = event.clientX - canvas.offsetLeft;
                const currentY = event.clientY - canvas.offsetTop;
                context.beginPath();
                context.moveTo(lastX, lastY);
                context.rect(lastX, lastY, currentX-lastX, currentY-lastY);
                context.stroke();
              };

              if (isDrawing && isPencil) {
                const currentX = event.clientX - canvas.offsetLeft;
                const currentY = event.clientY - canvas.offsetTop;
                context.beginPath();
                context.moveTo(lastX, lastY);
                context.lineTo(currentX, currentY);
                context.stroke();
                lastX = currentX;
                lastY = currentY;
              };
            });

            canvas.addEventListener('mouseup', () => {
              isDrawing = false;
              if (isRectangle){
                const currentX = event.clientX - canvas.offsetLeft;
                const currentY = event.clientY - canvas.offsetTop;
                context.beginPath();
                context.moveTo(lastX, lastY);
                context.rect(lastX, lastY, currentX - lastX, currentY - lastY);
                context.stroke();
              }
            });
      
          </script>
    </body>
</html>